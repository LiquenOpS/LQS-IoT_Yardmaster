# ğŸ‰ Curses UI æ›´æ–°ç¸½çµ

## ğŸ“… æ›´æ–°æ—¥æœŸ
2025-11-24

## ğŸ¯ æ›´æ–°å…§å®¹

### å…¨æ–° Curses äº’å‹•ç•Œé¢

æ¨¡æ“¬å™¨æ¨¡å¼ç¾åœ¨ä½¿ç”¨ **Python curses** åº«æä¾›å°ˆæ¥­çš„å…¨è¢å¹•çµ‚ç«¯ç•Œé¢ï¼

---

## âœ¨ æ–°åŠŸèƒ½ç‰¹è‰²

### 1. **å°ˆæ¥­çš„å…¨è¢å¹•ç•Œé¢**
- æ¸…æ™°çš„ç‰ˆé¢é…ç½®
- æ²’æœ‰é–ƒçˆçš„æ–‡å­—æ›´æ–°
- çµæ§‹åŒ–çš„ä¿¡æ¯é¡¯ç¤º

### 2. **å½©è‰²éŸ³è¨Šè¦–è¦ºåŒ–**
```
Volume: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  128/255  (ç¶ è‰²)
Bass:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   85/255  (ç¶ è‰²)
Mids:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   92/255  (é’è‰²)
Highs:  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   45/255  (é»ƒè‰²)
Beat:   ğŸ”¥ BEAT DETECTED!                         (ç´…è‰²)
```

### 3. **å³æ™‚æ•ˆæœåˆ‡æ›**
- æŒ‰éµç«‹å³éŸ¿æ‡‰
- æ•ˆæœåç¨±å³æ™‚æ›´æ–°
- ç„¡éœ€é‡å•Ÿç¨‹å¼

### 4. **å®Œæ•´çš„å¹«åŠ©ç•«é¢**
- æŒ‰ `H` éµæŸ¥çœ‹
- é¡¯ç¤ºæ‰€æœ‰ 12 å€‹æ•ˆæœ
- æ¨™ç¤ºç•¶å‰é¸ä¸­çš„æ•ˆæœ

### 5. **ä¸€ç›®äº†ç„¶çš„ç‹€æ…‹**
- é€£æ¥ç‹€æ…‹ï¼ˆé€£æ¥ä¸­/ç­‰å¾…ä¸­ï¼‰
- ç•¶å‰æ•ˆæœåç¨±å’Œç·¨è™Ÿ
- å°åŒ…è¨ˆæ•¸
- å³°å€¼é »ç‡

---

## ğŸ†š æ–°èˆŠå°æ¯”

### èˆŠç‰ˆï¼ˆæ–‡å­—æ¨¡å¼ï¼‰
```
ğŸ”® EMU ğŸ“¡ âœ… | Effect: color_wave   | Vol: 128 | Bass:  85 | Mids:  92 | Highs:  45 | Beat: ğŸ”¥ | Pkts:  1234
   [10/12] Press 'n'=next, 'p'=prev, 'h'=help, 'q'=quit
```
- âœ… ç°¡å–®
- âŒ å–®è¡Œé¡¯ç¤ºï¼Œä¿¡æ¯æ“æ“ 
- âŒ ç„¡è¦–è¦ºåŒ–
- âŒ å¹«åŠ©ä¿¡æ¯æœƒå¹²æ“¾ä¸»é¡¯ç¤º

### æ–°ç‰ˆï¼ˆCurses ç•Œé¢ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ğŸµ Audio Reactive LED Controller                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Mode:         ğŸ”® EMULATOR     Status:    ğŸ“¡ CONNECTED    â”‚
â”‚  Effect:       [10/12] color_wave                          â”‚
â”‚                                                            â”‚
â”‚  Audio Levels:                                             â”‚
â”‚  Volume:       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  128/255   â”‚
â”‚  Bass:         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   85/255   â”‚
â”‚  Mids:         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   92/255   â”‚
â”‚  Highs:        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   45/255   â”‚
â”‚  Beat:         ğŸ”¥ BEAT DETECTED!                          â”‚
â”‚                                                            â”‚
â”‚  Peak Freq: 523.3 Hz          Packets: 1234               â”‚
â”‚                                                            â”‚
â”‚  Keyboard Controls:                                        â”‚
â”‚  [N] Next  [P] Prev  [H] Help  [Q] Quit  [1-9,0] Jump    â”‚
â”‚                                                            â”‚
â”‚  Listening: UDP port 31337 (auto)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
- âœ… æ¸…æ™°çš„ç‰ˆé¢
- âœ… å½©è‰²è¦–è¦ºåŒ–
- âœ… çµæ§‹åŒ–é¡¯ç¤º
- âœ… ç¨ç«‹çš„å¹«åŠ©ç•«é¢

---

## ğŸ”§ æŠ€è¡“å¯¦ä½œ

### ä¸»è¦è®Šæ›´

#### 1. æ–°å¢ curses æ”¯æ´
```python
import curses
```

#### 2. æ–°å¢ curses ä¸»å¾ªç’°
```python
def run_with_curses(stdscr, args):
    """Run controller with curses interface"""
    # Setup curses
    curses.curs_set(0)
    stdscr.nodelay(1)
    stdscr.timeout(100)

    # Color initialization
    if curses.has_colors():
        curses.start_color()
        # ... color pairs

    # Main loop with keyboard handling
    while controller.running:
        key = stdscr.getch()
        # Handle keys...
        _draw_curses_ui(stdscr, controller, args)
```

#### 3. UI ç¹ªè£½å‡½æ•¸
```python
def _draw_curses_ui(stdscr, controller, args):
    """Draw the curses UI"""
    # Draw title bar
    # Draw status section
    # Draw audio levels with colored bars
    # Draw keyboard controls
    # Draw network info

def _draw_bar(stdscr, y, x, value, max_value, width, color_pair):
    """Draw a progress bar"""
    # Draw colored progress bar

def _draw_help_screen(stdscr, controller):
    """Draw help screen"""
    # Show all effects with current selection
```

#### 4. ä¸»å‡½æ•¸ä¿®æ”¹
```python
def main():
    # ...
    if args.emulator:
        # Use curses wrapper for emulator mode
        return curses.wrapper(run_with_curses, args)
    else:
        # Simple mode for real LEDs
        # ...
```

### é¡è‰²æ–¹æ¡ˆ

```python
curses.init_pair(1, curses.COLOR_GREEN, curses.COLOR_BLACK)    # Volume, Bass, Connected
curses.init_pair(2, curses.COLOR_CYAN, curses.COLOR_BLACK)     # Mode, Mids
curses.init_pair(3, curses.COLOR_YELLOW, curses.COLOR_BLACK)   # Highs, Waiting
curses.init_pair(4, curses.COLOR_RED, curses.COLOR_BLACK)      # Beat
curses.init_pair(5, curses.COLOR_MAGENTA, curses.COLOR_BLACK)  # Effect name
curses.init_pair(6, curses.COLOR_WHITE, curses.COLOR_BLUE)     # Title bar
```

---

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### å•Ÿå‹•

```bash
# è‡ªå‹•ä½¿ç”¨ curses ç•Œé¢
python3 audio_reactive_integrated.py --emulator
```

### éµç›¤æ§åˆ¶

| æŒ‰éµ | åŠŸèƒ½ |
|-----|------|
| `N` | ä¸‹ä¸€å€‹æ•ˆæœ |
| `P` | ä¸Šä¸€å€‹æ•ˆæœ |
| `H` | é¡¯ç¤ºå¹«åŠ© |
| `Q` | é€€å‡º |
| `1-9,0` | è·³åˆ°æ•ˆæœ #1-10 |

### æŸ¥çœ‹å¹«åŠ©

```bash
# ç¨‹å¼é‹è¡Œæ™‚æŒ‰ 'H' éµ
# æœƒé¡¯ç¤ºå®Œæ•´çš„æ•ˆæœåˆ—è¡¨å’Œæ§åˆ¶èªªæ˜
```

---

## ğŸ› éŒ¯èª¤è™•ç†

### Graceful Fallback

å¦‚æœ curses ç„¡æ³•åˆå§‹åŒ–ï¼ˆä¾‹å¦‚åœ¨ä¸æ”¯æ´çš„çµ‚ç«¯ä¸Šï¼‰ï¼Œç¨‹å¼æœƒé¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ï¼š

```
âŒ Curses error: ...
   Falling back to simple mode...
```

ç„¶å¾Œä½¿ç”¨ç°¡å–®çš„æ–‡å­—æ¨¡å¼ç¹¼çºŒé‹è¡Œã€‚

### çµ‚ç«¯å¤§å°

- æœ€å°å¯¬åº¦ï¼š60 å­—å…ƒ
- æœ€å°é«˜åº¦ï¼š20 è¡Œ
- è‡ªå‹•è™•ç†è¦–çª—å¤§å°èª¿æ•´

---

## âœ… ç›¸å®¹æ€§

### å®Œå…¨æ”¯æ´
- âœ… Linux (Debian, Ubuntu, Fedora, Arch, etc.)
- âœ… macOS
- âœ… WSL (Windows Subsystem for Linux)
- âœ… tmux / screen
- âœ… SSH é ç«¯çµ‚ç«¯

### éƒ¨åˆ†æ”¯æ´
- âš ï¸ éå¸¸èˆŠçš„çµ‚ç«¯
- âš ï¸ ä¸æ”¯æ´ ANSI é¡è‰²çš„çµ‚ç«¯ï¼ˆæœƒé™ç´šåˆ°é»‘ç™½ï¼‰

### ä¸æ”¯æ´
- âŒ Windows CMD
- âŒ Windows PowerShell (ä¸æ˜¯ Core ç‰ˆæœ¬)

---

## ğŸ“š æ–‡æª”

### æ–°å¢æ–‡æª”
- `CURSES_UI_GUIDE.md` - å®Œæ•´çš„ curses ç•Œé¢ä½¿ç”¨æŒ‡å—

### æ›´æ–°æ–‡æª”
- `START_HERE.md` - æ›´æ–°äº†å¿«é€Ÿé–‹å§‹éƒ¨åˆ†
- `KEYBOARD_CONTROL.md` - èªªæ˜æ–°çš„ curses ç•Œé¢
- `README_INTEGRATED.md` - æåˆ° curses ç•Œé¢

---

## ğŸ¯ ä¸‹ä¸€æ­¥å¯èƒ½çš„æ”¹é€²

### UI å¢å¼·
- [ ] LED ç‡ˆæ¢è¦–è¦ºåŒ–é¡¯ç¤º
- [ ] FFT é »è­œåœ–é¡¯ç¤º
- [ ] æ•ˆæœé è¦½ç¸®åœ–
- [ ] å¯èª¿æ•´çš„è¦–çª—å¸ƒå±€

### åŠŸèƒ½æ“´å……
- [ ] æ•ˆæœåƒæ•¸å³æ™‚èª¿æ•´
- [ ] å¿«æ·éµè‡ªå®šç¾©
- [ ] ä¸»é¡Œé¡è‰²è‡ªå®šç¾©
- [ ] å¤šè¦–çª—æ¨¡å¼ï¼ˆåŒæ™‚é¡¯ç¤ºå¤šå€‹è¦–åœ–ï¼‰

### äº’å‹•æ”¹é€²
- [ ] æ»‘é¼ æ”¯æ´ï¼ˆé»æ“Šé¸æ“‡æ•ˆæœï¼‰
- [ ] æ•ˆæœé è¨­å„²å­˜/è¼‰å…¥
- [ ] æ’­æ”¾æ¸…å–®æ¨¡å¼ï¼ˆè‡ªå‹•åˆ‡æ›æ•ˆæœï¼‰
- [ ] éŒ„è£½æ¨¡å¼ï¼ˆè¨˜éŒ„åˆ‡æ›åºåˆ—ï¼‰

---

## ğŸ‰ ç¸½çµ

Curses ç•Œé¢ç‚ºæ¨¡æ“¬å™¨æ¨¡å¼å¸¶ä¾†äº†å°ˆæ¥­ç´šçš„ä½¿ç”¨é«”é©—ï¼š

âœ… **æ›´æ¸…æ™°** - çµæ§‹åŒ–çš„ä¿¡æ¯é¡¯ç¤º
âœ… **æ›´ç›´è§€** - å½©è‰²è¦–è¦ºåŒ–é€²åº¦æ¢
âœ… **æ›´æµæš¢** - å³æ™‚æ›´æ–°ç„¡é–ƒçˆ
âœ… **æ›´å¼·å¤§** - å®Œæ•´çš„éµç›¤æ§åˆ¶
âœ… **æ›´å°ˆæ¥­** - é¡ä¼¼å°ˆæ¥­éŸ³è¨Šè»Ÿé«”çš„ç•Œé¢

ç¾åœ¨å°±è©¦è©¦æ–°ç•Œé¢å§ï¼

```bash
python3 audio_reactive_integrated.py --emulator
```

ğŸ¨âœ¨ äº«å—å…¨æ–°çš„äº’å‹•é«”é©—ï¼
